# ü•ò RecipesBook API

Node.js + Express –±–µ–∫–µ–Ω–¥ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∏ —Ä–µ—Ü–µ–ø—Ç–∏, –∏–∑–ø–æ–ª–∑–≤–∞—â **Firebase Firestore** –∑–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ –∏ **JWT** –∑–∞ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ.  
–ü—Ä–æ–µ–∫—Ç—ä—Ç —Å–ª—É–∂–∏ –∫–∞—Ç–æ –æ—Å–Ω–æ–≤–µ–Ω —à–∞–±–ª–æ–Ω –∑–∞ –±—ä–¥–µ—â–∏ –±–µ–∫–µ–Ω–¥ —Å–∏—Å—Ç–µ–º–∏ —Å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏, CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∑–∞—â–∏—Ç–∞ —á—Ä–µ–∑ —Ç–æ–∫–µ–Ω–∏.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project-root/
‚îÇ
‚îú‚îÄ‚îÄ config/                 # Firebase Admin SDK –∫–ª—é—á
‚îú‚îÄ‚îÄ controllers/            # –õ–æ–≥–∏–∫–∞ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏—Ç–µ (auth, recipes)
‚îú‚îÄ‚îÄ db/                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ Firestore
‚îÇ   ‚îî‚îÄ‚îÄ firestore.js
‚îú‚îÄ‚îÄ middleware/             # JWT –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ routes/                 # Express –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îú‚îÄ‚îÄ recipes.js
‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ certs/                  # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∏ –∑–∞ HTTPS (–ª–æ–∫–∞–ª–Ω–æ)
‚îú‚îÄ‚îÄ server.js               # –û—Å–Ω–æ–≤–µ–Ω —Å—ä—Ä–≤—ä—Ä
‚îî‚îÄ‚îÄ .env                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ —Å—Ä–µ–¥–∞—Ç–∞
```

---

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Node.js / Express** ‚Äî REST API —Å—ä—Ä–≤—ä—Ä  
- **Firebase Firestore (Admin SDK)** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω–∏  
- **bcryptjs** ‚Äî —Ö–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ –ø–∞—Ä–æ–ª–∏  
- **jsonwebtoken (JWT)** ‚Äî —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ –∏ –∑–∞—â–∏—Ç–∞ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏  
- **dotenv** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á—Ä–µ–∑ `.env`  
- **Postman** ‚Äî —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ API –∑–∞—è–≤–∫–∏—Ç–µ  

---

## ‚öôÔ∏è –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –∏ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ

```bash
git clone <your_repo_url>
cd recipesbook-api
npm install
```

–°—ä–∑–¥–∞–π —Ñ–∞–π–ª `.env` –≤ root –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞:
```
FIREBASE_KEY=./config/recipesbook-db-firebase-adminsdk-fbsvc-31066ccb8c.json
JWT_SECRET=your_generated_secret_key
```

–°—Ç–∞—Ä—Ç–∏—Ä–∞–π HTTPS —Å—ä—Ä–≤—ä—Ä–∞:
```bash
node server.js
# –∏–ª–∏
npm run dev
```

---

## üîê –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ (Authentication Flow)

- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** ‚Äì —Å—ä–∑–¥–∞–≤–∞ —Å–µ –Ω–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –≤ –∫–æ–ª–µ–∫—Ü–∏—è—Ç–∞ `users`, –∞ –ø–∞—Ä–æ–ª–∞—Ç–∞ —Å–µ —Ö–µ—à–∏—Ä–∞ —Å `bcrypt`.  
- **–í—Ö–æ–¥** ‚Äì –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ –ª–æ–≥–≤–∞–Ω–µ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞ JWT —Ç–æ–∫–µ–Ω —Å `userId` –∏ `role`.  
- **–ó–∞—â–∏—Ç–µ–Ω–∏ –ø—ä—Ç–∏—â–∞** ‚Äì –∏–∑–∏—Å–∫–≤–∞—Ç header:
  ```
  Authorization: Bearer <your_token>
  ```

---

## üß≠ API Endpoints

| –ú–µ—Ç–æ–¥ | –ü—ä—Ç | –ó–∞—â–∏—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|--------|-----------|
| **POST** | `/api/auth/register` | ‚ùå | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –Ω–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª |
| **POST** | `/api/auth/login` | ‚ùå | –í—Ö–æ–¥ –∏ –ø–æ–ª—É—á–∞–≤–∞–Ω–µ –Ω–∞ JWT —Ç–æ–∫–µ–Ω |
| **GET** | `/api/recipes` | ‚ùå | –í—Ä—ä—â–∞ –≤—Å–∏—á–∫–∏ —Ä–µ—Ü–µ–ø—Ç–∏ |
| **GET** | `/api/recipes/:id` | ‚ùå | –í—Ä—ä—â–∞ —Ä–µ—Ü–µ–ø—Ç–∞ –ø–æ ID |
| **GET** | `/api/recipes/mine` | ‚úÖ | –í—Ä—ä—â–∞ —Ä–µ—Ü–µ–ø—Ç–∏—Ç–µ –Ω–∞ —Ç–µ–∫—É—â–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª |
| **POST** | `/api/recipes` | ‚úÖ | –°—ä–∑–¥–∞–≤–∞ –Ω–æ–≤–∞ —Ä–µ—Ü–µ–ø—Ç–∞ |
| **PUT** | `/api/recipes/:id` | ‚úÖ | –†–µ–¥–∞–∫—Ç–∏—Ä–∞ —Ä–µ—Ü–µ–ø—Ç–∞ (—Å–∞–º–æ –∞–≤—Ç–æ—Ä—ä—Ç) |
| **DELETE** | `/api/recipes/:id` | ‚úÖ | –ò–∑—Ç—Ä–∏–≤–∞ —Ä–µ—Ü–µ–ø—Ç–∞ (—Å–∞–º–æ –∞–≤—Ç–æ—Ä—ä—Ç) |

---

## üì§ –ü—Ä–∏–º–µ—Ä–∏

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
**POST** `/api/auth/register`
```json
{
  "username": "chefIvan",
  "email": "ivan@example.com",
  "password": "123456",
  "passwordConfirm": "123456"
}
```

### –í—Ö–æ–¥
**POST** `/api/auth/login`
```json
{
  "email": "ivan@example.com",
  "password": "123456"
}
```

### –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ä–µ—Ü–µ–ø—Ç–∞
**POST** `/api/recipes`
(–∏–∑–∏—Å–∫–≤–∞ Authorization header)
```json
{
  "title": "–®–æ–ø—Å–∫–∞ —Å–∞–ª–∞—Ç–∞",
  "category": "–°–∞–ª–∞—Ç–∏",
  "image_url": "",
  "ingredients": "–¥–æ–º–∞—Ç–∏, –∫—Ä–∞—Å—Ç–∞–≤–∏—Ü–∏, —Å–∏—Ä–µ–Ω–µ, –ª—É–∫, –∑–µ—Ö—Ç–∏–Ω",
  "instructions": "–ù–∞—Ä–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏—Ç–µ –∏ –≥–∏ —Å–º–µ—Å–∏ —Å—ä—Å –∑–µ—Ö—Ç–∏–Ω –∏ —Å–∏—Ä–µ–Ω–µ."
}
```

---

## üß© Firestore —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ö–æ–ª–µ–∫—Ü–∏—è `users`
```json
{
  "username": "chefIvan",
  "email": "ivan@example.com",
  "passwordHash": "<hashed_password>",
  "role": "user",
  "createdAt": "2025-10-08T20:40:00Z"
}
```

### –ö–æ–ª–µ–∫—Ü–∏—è `recipes`
```json
{
  "title": "–®–æ–ø—Å–∫–∞ —Å–∞–ª–∞—Ç–∞",
  "category": "–°–∞–ª–∞—Ç–∏",
  "ingredients": ["–¥–æ–º–∞—Ç–∏", "–∫—Ä–∞—Å—Ç–∞–≤–∏—Ü–∏", "—Å–∏—Ä–µ–Ω–µ"],
  "instructions": "–ù–∞—Ä–µ–∂–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏—Ç–µ...",
  "authorId": "<userId>",
  "createdAt": "Timestamp",
  "updatedAt": "Timestamp"
}
```

---

## ‚ö° –ü–æ–ª–µ–∑–Ω–∏ –±–µ–ª–µ–∂–∫–∏

- üîë –í—Å–µ–∫–∏ –∑–∞—â–∏—Ç–µ–Ω endpoint —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ header:  
  `Authorization: Bearer <token>`
- üïí –¢–æ–∫–µ–Ω—ä—Ç –µ –≤–∞–ª–∏–¥–µ–Ω **1 —á–∞—Å**
- üß± –í—Å–∏—á–∫–∏ –¥–∞—Ç–∏ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –∫–∞—Ç–æ **Firestore Timestamp**
- üí° –ü—Ä–æ–µ–∫—Ç—ä—Ç –º–æ–∂–µ –ª–µ—Å–Ω–æ –¥–∞ —Å–µ –Ω–∞–¥–≥—Ä–∞–¥–∏ —Å frontend (React, Vue, Angular)
